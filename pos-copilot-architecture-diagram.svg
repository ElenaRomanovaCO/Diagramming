<svg viewBox="0 0 960 960" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="480" y="35" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">POS-Copilot System Architecture</text>
  <text x="480" y="60" font-family="Arial" font-size="16" text-anchor="middle" fill="#444">Multi-Agent Architecture with User Proxy Pattern for Natural Language Interface</text>
  
  <!-- Client Tier -->
  <rect x="10" y="80" width="940" height="160" rx="10" ry="10" fill="#f8f8f8" stroke="#ccc" stroke-width="2"/>
  <text x="50" y="110" font-family="Arial" font-size="18" font-weight="bold">Client Tier</text>
  
  <!-- User Icon -->
  <circle cx="100" cy="150" r="20" fill="#fff" stroke="#000" stroke-width="2"/>
  <circle cx="100" cy="130" r="12" fill="#fff" stroke="#000" stroke-width="2"/>
  <rect x="70" y="170" width="60" height="30" rx="5" ry="5" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="100" y="190" font-family="Arial" font-size="14" text-anchor="middle">User</text>
  
  <!-- POS Devices -->
  <rect x="180" y="110" width="80" height="60" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="2"/>
  <rect x="188" y="118" width="64" height="10" fill="#0066cc" rx="2" ry="2"/>
  <circle cx="193" cy="123" r="2" fill="#fff"/>
  <circle cx="198" cy="123" r="2" fill="#fff"/>
  <circle cx="203" cy="123" r="2" fill="#fff"/>
  <text x="220" y="145" font-family="Arial" font-size="12" text-anchor="middle">POS</text>
  <text x="220" y="160" font-family="Arial" font-size="12" text-anchor="middle">Terminals</text>
  
  <rect x="280" y="110" width="80" height="60" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="2"/>
  <rect x="288" y="118" width="64" height="10" fill="#0066cc" rx="2" ry="2"/>
  <circle cx="293" cy="123" r="2" fill="#fff"/>
  <circle cx="298" cy="123" r="2" fill="#fff"/>
  <circle cx="303" cy="123" r="2" fill="#fff"/>
  <text x="320" y="145" font-family="Arial" font-size="12" text-anchor="middle">Mobile</text>
  <text x="320" y="160" font-family="Arial" font-size="12" text-anchor="middle">Phones</text>
  
  <rect x="380" y="110" width="80" height="60" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="2"/>
  <rect x="388" y="118" width="64" height="10" fill="#0066cc" rx="2" ry="2"/>
  <circle cx="393" cy="123" r="2" fill="#fff"/>
  <circle cx="398" cy="123" r="2" fill="#fff"/>
  <circle cx="403" cy="123" r="2" fill="#fff"/>
  <text x="420" y="145" font-family="Arial" font-size="12" text-anchor="middle">Tablets</text>
  
  <rect x="480" y="110" width="80" height="60" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="2"/>
  <rect x="488" y="118" width="64" height="10" fill="#0066cc" rx="2" ry="2"/>
  <circle cx="493" cy="123" r="2" fill="#fff"/>
  <circle cx="498" cy="123" r="2" fill="#fff"/>
  <circle cx="503" cy="123" r="2" fill="#fff"/>
  <text x="520" y="145" font-family="Arial" font-size="12" text-anchor="middle">eCommerce</text>
  <text x="520" y="160" font-family="Arial" font-size="12" text-anchor="middle">Channels</text>
  
  <!-- Client Additional UI Components -->
  <rect x="600" y="110" width="140" height="80" rx="5" ry="5" fill="#fff" stroke="#009933" stroke-width="2"/>
  <text x="670" y="130" font-family="Arial" font-size="12" text-anchor="middle" fill="#009933">Interactive React Components</text>
  <!-- Chart Icons -->
  <circle cx="630" cy="155" r="15" fill="#fff" stroke="#ffc000" stroke-width="2"/>
  <path d="M 630,155 L 630,155 L 630,142 L 642,155 L 630,155 Z" fill="#ffc000"/>
  <path d="M 630,155 L 630,155 L 618,150 L 630,168 L 630,155 Z" fill="#00b0f0"/>
  <path d="M 630,155 L 630,155 L 630,168 L 642,160 L 630,155 Z" fill="#ff0000"/>
  
  <!-- Graph Icons -->
  <rect x="660" y="145" width="10" height="25" fill="#00b0f0"/>
  <rect x="675" y="155" width="10" height="15" fill="#00b0f0"/>
  <rect x="690" y="140" width="10" height="30" fill="#00b0f0"/>
  <rect x="705" y="150" width="10" height="20" fill="#00b0f0"/>
  
  <!-- Web Search Results Box -->
  <rect x="770" y="110" width="140" height="80" rx="5" ry="5" fill="#fff" stroke="#666666" stroke-width="2"/>
  <text x="840" y="130" font-family="Arial" font-size="12" text-anchor="middle">Web Search Results</text>
  <!-- Lines representing text -->
  <rect x="790" y="140" width="100" height="5" rx="2" ry="2" fill="#dddddd"/>
  <rect x="790" y="150" width="100" height="5" rx="2" ry="2" fill="#dddddd"/>
  <rect x="790" y="160" width="100" height="5" rx="2" ry="2" fill="#dddddd"/>
  <rect x="790" y="170" width="70" height="5" rx="2" ry="2" fill="#dddddd"/>
  
  <!-- Sample Query Text -->
  <text x="480" y="205" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">Natural Language Query: "Show total sales by region and product"</text>
  
  <!-- Connector Arrow -->
  <line x1="480" y1="215" x2="480" y2="240" stroke="#000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  
  <!-- API Tier -->
  <rect x="10" y="240" width="940" height="120" rx="10" ry="10" fill="#e6f2ff" stroke="#99ccff" stroke-width="2"/>
  <text x="50" y="270" font-family="Arial" font-size="18" font-weight="bold">API Tier</text>
  
  <!-- API Box -->
  <rect x="100" y="260" width="60" height="60" rx="10" ry="10" fill="#fff" stroke="#0066cc" stroke-width="2"/>
  <text x="130" y="295" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="#0066cc">API</text>
  <rect x="85" y="325" width="90" height="25" rx="5" ry="5" fill="#fff" stroke="#996633" stroke-width="1"/>
  <text x="130" y="342" font-family="Arial" font-size="12" text-anchor="middle">App Service</text>
  
  <!-- Fast API Box -->
  <rect x="220" y="260" width="100" height="60" rx="5" ry="5" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="270" y="280" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">FastAPI</text>
  <text x="270" y="300" font-family="Arial" font-size="12" text-anchor="middle">Web Application</text>
  
  <!-- API Endpoints -->
  <rect x="370" y="250" width="280" height="100" rx="5" ry="5" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="510" y="270" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">API Endpoints</text>
  
  <rect x="390" y="280" width="50" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="415" y="297" font-family="Arial" font-size="12" text-anchor="middle">/chat</text>
  
  <rect x="450" y="280" width="50" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="475" y="297" font-family="Arial" font-size="12" text-anchor="middle">/query</text>
  
  <rect x="510" y="280" width="50" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="535" y="297" font-family="Arial" font-size="12" text-anchor="middle">/update</text>
  
  <rect x="390" y="315" width="50" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="415" y="332" font-family="Arial" font-size="12" text-anchor="middle">/visualize</text>
  
  <rect x="450" y="315" width="50" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="475" y="332" font-family="Arial" font-size="12" text-anchor="middle">/search</text>
  
  <rect x="510" y="315" width="110" height="25" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="565" y="332" font-family="Arial" font-size="12" text-anchor="middle">/router (API Dispatch)</text>
  
  <!-- API Path Text -->
  <text x="480" y="370" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">All ML requests go through /chat endpoint to User Proxy Agent first</text>
  
  <!-- AI Agent Tier -->
  <rect x="10" y="380" width="940" height="320" rx="10" ry="10" fill="#f0e6ff" stroke="#cc99ff" stroke-width="2"/>
  <text x="50" y="405" font-family="Arial" font-size="18" font-weight="bold">AI Agent Tier (Azure AI Agent Service)</text>
  
  <!-- User Proxy Agent -->
  <rect x="60" y="420" width="840" height="60" rx="10" ry="10" fill="#fffce5" stroke="#ffd700" stroke-width="2"/>
  <text x="480" y="440" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">User Proxy Agent</text>
  <text x="480" y="460" font-family="Arial" font-size="14" text-anchor="middle">Receives user input, identifies intent (query, update, visualization, search), routes to appropriate agents</text>
  <!-- User icon -->
  <rect x="70" y="430" width="40" height="40" rx="5" ry="5" fill="#fff" stroke="#ffd700" stroke-width="1"/>
  <circle cx="90" cy="440" r="10" fill="#ffd700"/>
  <rect x="80" y="450" width="20" height="15" fill="#ffd700"/>
  
  <!-- Data Analyst Agent -->
  <rect x="60" y="490" width="840" height="50" rx="10" ry="10" fill="#f2e6ff" stroke="#cc99ff" stroke-width="2"/>
  <text x="480" y="510" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Data Analyst Agent</text>
  <text x="480" y="530" font-family="Arial" font-size="14" text-anchor="middle">Analyzes request, coordinates specialized agents, orchestrates workflow based on intent</text>
  <!-- Document icon -->
  <rect x="70" y="495" width="40" height="40" rx="5" ry="5" fill="#fff" stroke="#cc99ff" stroke-width="1"/>
  <line x1="80" y1="505" x2="100" y2="505" stroke="#cc99ff" stroke-width="2"/>
  <line x1="80" y1="515" x2="100" y2="515" stroke="#cc99ff" stroke-width="2"/>
  <line x1="80" y1="525" x2="90" y2="525" stroke="#cc99ff" stroke-width="2"/>
  
  <!-- Specialized Agents -->
  <rect x="60" y="550" width="840" height="140" rx="10" ry="10" fill="#fff" stroke="#aaa" stroke-width="1"/>
  <text x="480" y="570" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Specialized Agents</text>
  
  <!-- SQL Agent -->
  <rect x="80" y="580" width="120" height="50" rx="5" ry="5" fill="#f9f0ff" stroke="#cc99ff" stroke-width="1"/>
  <text x="140" y="600" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">SQL Agent</text>
  <text x="140" y="618" font-family="Arial" font-size="11" text-anchor="middle">Generates SQL</text>
  <text x="140" y="630" font-family="Arial" font-size="11" text-anchor="middle">from natural language</text>
  
  <!-- Database Agent -->
  <rect x="220" y="580" width="120" height="50" rx="5" ry="5" fill="#f9f0ff" stroke="#cc99ff" stroke-width="1"/>
  <text x="280" y="600" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Database Agent</text>
  <text x="280" y="618" font-family="Arial" font-size="11" text-anchor="middle">Executes queries</text>
  <text x="280" y="630" font-family="Arial" font-size="11" text-anchor="middle">against PostgreSQL</text>
  
  <!-- Response Agent -->
  <rect x="360" y="580" width="120" height="50" rx="5" ry="5" fill="#f9f0ff" stroke="#cc99ff" stroke-width="1"/>
  <text x="420" y="600" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Response Agent</text>
  <text x="420" y="618" font-family="Arial" font-size="11" text-anchor="middle">Creates summaries</text>
  <text x="420" y="630" font-family="Arial" font-size="11" text-anchor="middle">from query results</text>
  
  <!-- Verification Agent -->
  <rect x="500" y="580" width="120" height="50" rx="5" ry="5" fill="#f9f0ff" stroke="#cc99ff" stroke-width="1"/>
  <text x="560" y="600" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Verification Agent</text>
  <text x="560" y="618" font-family="Arial" font-size="11" text-anchor="middle">Validates operations</text>
  <text x="560" y="630" font-family="Arial" font-size="11" text-anchor="middle">and ensures safety</text>
  
  <!-- Visualization Agent -->
  <rect x="140" y="640" width="120" height="50" rx="5" ry="5" fill="#e6ffe6" stroke="#009933" stroke-width="1"/>
  <text x="200" y="660" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Visualization Agent</text>
  <text x="200" y="678" font-family="Arial" font-size="11" text-anchor="middle">Creates charts and</text>
  <text x="200" y="690" font-family="Arial" font-size="11" text-anchor="middle">visual components</text>
  
  <!-- Search Agent -->
  <rect x="440" y="640" width="120" height="50" rx="5" ry="5" fill="#e6f2ff" stroke="#0066cc" stroke-width="1"/>
  <text x="500" y="660" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Search Agent</text>
  <text x="500" y="678" font-family="Arial" font-size="11" text-anchor="middle">Retrieves external</text>
  <text x="500" y="690" font-family="Arial" font-size="11" text-anchor="middle">information via Bing</text>
  
  <!-- Voice Agent - New feature -->
  <rect x="640" y="580" width="120" height="50" rx="5" ry="5" fill="#fff2e6" stroke="#ff9933" stroke-width="1"/>
  <text x="700" y="600" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Voice Agent</text>
  <text x="700" y="618" font-family="Arial" font-size="11" text-anchor="middle">Processes voice input</text>
  <text x="700" y="630" font-family="Arial" font-size="11" text-anchor="middle">and voice responses</text>
  
  <!-- Language Agent - New feature -->
  <rect x="640" y="640" width="120" height="50" rx="5" ry="5" fill="#ffe6e6" stroke="#ff3333" stroke-width="1"/>
  <text x="700" y="660" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Language Agent</text>
  <text x="700" y="678" font-family="Arial" font-size="11" text-anchor="middle">Provides multi-language</text>
  <text x="700" y="690" font-family="Arial" font-size="11" text-anchor="middle">translation and support</text>
  
  <!-- Business Components Tier -->
  <rect x="10" y="710" width="940" height="130" rx="10" ry="10" fill="#e6ffff" stroke="#00cccc" stroke-width="2"/>
  <text x="50" y="735" font-family="Arial" font-size="18" font-weight="bold">Business Components</text>
  
  <!-- Database icon -->
  <rect x="70" y="750" width="60" height="60" rx="5" ry="5" fill="#fff" stroke="#00cccc" stroke-width="2"/>
  <ellipse cx="100" cy="760" rx="20" ry="5" fill="none" stroke="#00cccc" stroke-width="2"/>
  <line x1="80" y1="760" x2="80" y2="790" stroke="#00cccc" stroke-width="2"/>
  <line x1="120" y1="760" x2="120" y2="790" stroke="#00cccc" stroke-width="2"/>
  <ellipse cx="100" cy="790" rx="20" ry="5" fill="none" stroke="#00cccc" stroke-width="2"/>
  
  <!-- Business Components -->
  <rect x="150" y="745" width="800" height="85" rx="5" ry="5" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="550" y="765" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Business Components</text>
  
  <rect x="160" y="775" width="110" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="215" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Transaction Mgmt</text>
  <text x="215" y="810" font-family="Arial" font-size="10" text-anchor="middle">txn-info, reports</text>
  
  <rect x="275" y="775" width="110" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="330" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Customer Mgmt</text>
  <text x="330" y="810" font-family="Arial" font-size="10" text-anchor="middle">data, subscriptions</text>
  
  <rect x="390" y="775" width="80" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="430" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Settlement</text>
  <text x="430" y="810" font-family="Arial" font-size="10" text-anchor="middle">access/manage</text>
  
  <rect x="475" y="775" width="100" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="525" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Reconciliation</text>
  <text x="525" y="810" font-family="Arial" font-size="10" text-anchor="middle">data access/manage</text>
  
  <rect x="580" y="775" width="110" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="635" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Inventory Mgmt</text>
  <text x="635" y="810" font-family="Arial" font-size="10" text-anchor="middle">manage inventories</text>
  
  <rect x="695" y="775" width="80" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="735" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Scheduling</text>
  <text x="735" y="810" font-family="Arial" font-size="10" text-anchor="middle">manage staffing</text>
  
  <rect x="780" y="775" width="110" height="45" rx="5" ry="5" fill="#fff" stroke="#0066cc" stroke-width="1"/>
  <text x="835" y="795" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Heartland Analytics</text>
  <text x="835" y="810" font-family="Arial" font-size="10" text-anchor="middle">forecasting, analytics</text>
  
  <!-- Footer -->
  <rect x="10" y="850" width="940" height="30" rx="10" ry="10" fill="#f0f0f0" stroke="#ccc" stroke-width="1"/>
  <text x="480" y="870" font-family="Arial" font-size="14" text-anchor="middle" fill="#666">Powered by Azure AI and Azure Database Services</text>
</svg>
